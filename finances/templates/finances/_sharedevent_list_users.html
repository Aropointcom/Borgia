<div class="panel panel-default">
  <div class="panel-heading">
    Utilisateurs
  </div>
  <div class="panel-body" id="table_users">
    <p>
        {% if errors != 0 %}
            {{ errors }} erreurs de traitement
        {% endif %}
    </p>
    <p>
        {% if done == False %}
            {% if state == "users" %}
            <a class="btn btn-danger"
            href="{% url 'url_sharedevent_remove_user' group_name=group.name pk=pk user_pk='ALL' %}?state={{ state }}&order_by={{ order_by }}">
            Supprimer tous les utilisateurs</a>
            {% else %}
              <a class="btn btn-warning"
              href="{% url 'url_sharedevent_remove_user' group_name=group.name pk=pk user_pk='ALL' %}?state={{ state }}&order_by={{ order_by }}">
              RAZ de tous les users</a>
            {% endif %}
        {% endif %}
    </p>
    <table class="table table-default table-hover table-striped">
      <thead>
        <tr>
            <th>Username</th>
            <th>Prénom Nom</th>
            <th>Bucque</th>
            {% if state == 'users' %}
                <th>Préinscrit</th>
                <th>Pris</th>
            {% elif state == 'participants' %}
                <th>Pris</th>
            {% elif state == 'registrants' %}
                <th>Préinscrit</th>
            {% elif done %}
                <th>Pris</th>
            {% endif %}
            {% if state != "users" %}
              <th>Prix</th>
            {% endif %}
            {% if done == False %}
              <th>Supprimer</th>
            {% endif %}
        </tr>
      </thead>
      <tbody>
      {% for u in list_weights %}
          <tr>
              <td>{{ u.0.username }}</td>
              <td>{{ u.0.first_name }} {{ u.0.last_name }}</td>
              <td>{{ u.0.surname }}</td>

                {% if done %}
                  <td>
                  {{ u.1 }}
                  </td>
                {% else %}
                  {% if state == 'users' %}
                    <td>
                      <input id="weight_registered_{{ u.0.pk }}" class="form-control" type="number" min="0" value="{{ u.1 }}"/>
                    </td>
                    <td>
                      <input id="weight_participant_{{ u.0.pk }}" class="form-control" type="number" min="0" value="{{ u.2 }}"/>
                    </td>
                  {% elif state == 'participants' %}
                    <td>
                      <input id="weight_participant_{{ u.0.pk }}" class="form-control" type="number" min="0" value="{{ u.1 }}"/>
                    </td>
                  {% elif state == 'registrants' %}
                    <td>
                      <input id="weight_registered_{{ u.0.pk }}" class="form-control" type="number" min="0" value="{{ u.1 }}"/>
                    </td>
                  {% endif %}
                {% endif %}
              </td>
              {% if done %}
                <td>
                  {% if price %}
                    {{ u.2 }}
                  {% else %}
                    Indéfini
                  {% endif %}
                </td>
              {% elif state != "users" %}
              <td id="price_{{ u.0.pk }}">
                {% if price %}
                  {{ u.1 }}
                {% else %}
                  Indéfini
                {% endif %}
              </td>
              {% endif %}
              {% if not done %}
              <td>
                  {% if state == 'users' %}
                      <a class="btn btn-small btn-danger"
                      href="{% url 'url_sharedevent_remove_user' group_name=group.name pk=pk user_pk=u.0.pk %}?state={{ state }}&order_by={{ order_by }}">Supprimer</a>
                  {% else %}
                      <a class="btn btn-small btn-warning"
                      href="{% url 'url_sharedevent_remove_user' group_name=group.name pk=pk user_pk=u.0.pk %}?state={{ state }}&order_by={{ order_by }}">RAZ</a>
                  {% endif %}
              </td>
              {% endif %}
          </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
